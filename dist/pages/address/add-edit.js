(wx.webpackJsonp=wx.webpackJsonp||[]).push([[26],{"132":function(e,t,n){e.exports=n.p+"pages/address/add-edit.wxml"},"18":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(o=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a,i,s=n(6),f=n(0),u=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(f),r=n(5),l=n(7),c=n(70),p=n(69);function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(131);var h=(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AddEdit,f.Component),o(AddEdit,[{"key":"_constructor","value":function _constructor(){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0})(AddEdit.prototype.__proto__||Object.getPrototypeOf(AddEdit.prototype),"_constructor",this).call(this),this.state={"pageType":"add","setDefault":[],"chooseLocation":null,"id":"","areaInfo":"","latitude":"","longitude":"","address":"","userName":"","userMobile":"","isDefault":"N"},this.$$refs=new u.default.RefsArray}},{"key":"componentWillMount","value":function componentWillMount(){var e=this.$router.params.id;"undefined"!==e&&(this.getEditAddInfo(e),this.setState({"pageType":"edit","id":e}))}},{"key":"componentDidShow","value":function componentDidShow(){if(this.state.chooseLocation){var e=this.state.chooseLocation.getLocation(),t=e.address,n=e.latitude,o=e.longitude;this.setState({"areaInfo":t,"latitude":n,"longitude":o})}}},{"key":"setValue","value":function setValue(e,t){var n=e.detail.value;this.setState(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}({},t,n))}},{"key":"_createData","value":function _createData(e,t,n){var o=this;this.__state=e||this.state||{},this.__props=t||this.props||{};var a=this.$prefix,i=(0,f.genCompid)(a+"$compid__55"),s=d(i,2),u=s[0],r=s[1],l=(0,f.internal_inline_style)({"background":"#fff"});this.anonymousFunc0=function(e){return o.setValue(e,"address")},this.anonymousFunc1=function(e){return o.setValue(e,"userName")},this.anonymousFunc2=function(e){return o.setValue(e,"userMobile")};var c=[{"label":"设为默认","value":"Y"}];return f.propsManager.set({"selectedList":this.__state.setDefault,"options":c,"onChange":this.handleRadioChange},r,u),Object.assign(this.__state,{"anonymousState__temp":l,"anonymousState__temp2":c,"$compid__55":r}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}},{"key":"anonymousFunc2","value":function anonymousFunc2(){}}]),i=a=AddEdit,a.$$events=["goAddress","anonymousFunc0","anonymousFunc1","anonymousFunc2","saveSet","deleteHandler"],a.$$componentPath="pages/address/add-edit",i);function AddEdit(){var e,t,o;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AddEdit);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=o=_possibleConstructorReturn(this,(e=AddEdit.__proto__||Object.getPrototypeOf(AddEdit)).call.apply(e,[this].concat(a)))).$usedState=["anonymousState__temp","anonymousState__temp2","$compid__55","pageType","setDefault","chooseLocation","id","areaInfo","latitude","longitude","address","userName","userMobile","isDefault"],o.config={"navigationBarTitleText":"选择地址","navigationStyle":"default"},o.getEditAddInfo=function(t){var e=u.default.getStorageSync("addressLists").filter(function(e){return e.id===t});if(0<e.length){var n=e[0];o.setState({"id":t,"areaInfo":n.areaInfo,"latitude":n.latitude,"longitude":n.longitude,"address":n.address,"userName":n.userName,"userMobile":n.userMobile,"isDefault":n.isDefault,"setDefault":[n.isDefault]})}},o.goAddress=function(){o.setState({"chooseLocation":u.default.requirePlugin("chooseLocation")}),u.default.getSetting({"success":function success(e){if(e.authSetting["scope.userLocation"]){(0,l.getLocationAuth)(function(){u.default.getLocation({"type":"wgs84","success":function success(e){var t=e.latitude,n=e.longitude,o=JSON.stringify({"latitude":t,"longitude":n});u.default.navigateTo({"url":"plugin://chooseLocation/index?key=E4EBZ-Z7QRF-BREJT-JZGXD-2DDE6-6XB6T&referer=天富一生约&location="+o+"&category=公司企业,房产小区"})}})})}else u.default.showModal({"title":"","content":"您还未授权访问地理信息，请先同意授权","success":function success(e){e.confirm&&u.default.openSetting({"success":function success(e){console.log(e)}})}})}})},o.handleRadioChange=function(e){o.setState({"setDefault":e,"isDefault":0<e.length?"Y":"N"}),"edit"===o.state.pageType&&0<e.length&&(0,p.defaultSet)(o.state.id)},o.saveSet=function(){var e={"id":"","userName":"","userMobile":"","areaInfo":"","address":"","longitude":"","latitude":"","isDefault":""};for(var t in 0<o.state.setDefault.length&&(e.isDefault=o.state.setDefault[0]),e)e[t]=o.state[t];(0,c.validateEmpty)(e,{"userName":{"message":"请输入联系人名称"},"userMobile":{"message":"请输入联系电话"},"areaInfo":{"message":"请选择收货地址"},"address":{"message":"请填写详细地址"}})&&((0,c.validateTel)(e.userMobile)?(u.default.showLoading({"title":"提交中"}),(0,p.saveAdd)(e).then(function(e){u.default.hideLoading(),0===e.data.code?(u.default.showToast({"title":"保存成功"}),u.default.navigateBack(),console.log(e)):u.default.showToast({"title":"提交失败："+e.data.msg})})):u.default.showToast({"title":"请输入正确的手机号码","icon":"none"}))},o.deleteHandler=function(){var t=o.state.id;u.default.showModal({"title":"温馨提示","content":"您确定要删除此地址吗？","success":function success(e){e.confirm&&(0,p.deleteAdd)(t).then(function(e){0===e.data.code&&u.default.showToast({"title":"删除成功","icon":"none"}).then(function(){return setTimeout(function(){u.default.navigateBack({"delta":-1})},1e3)})})}})},o.customComponents=["AtCheckbox"],_possibleConstructorReturn(o,t)}h=(0,s.__decorate)([(0,r.inject)("appStore"),r.observer],h),t.default=h,Component(n(0).default.createComponent(h,!0))},"197":function(e,t,n){"use strict";n.r(t);n(198);var o=n(73);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a)},"198":function(e,t,n){"use strict";n(132)},"73":function(e,t,n){"use strict";n.r(t);var o=n(18),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t.default=a.a}},[[197,0,1,2]]]);