(wx.webpackJsonp=wx.webpackJsonp||[]).push([[31],{"155":function(t,e,o){t.exports=o.p+"pages/admin/staffs.wxml"},"238":function(t,e,o){"use strict";o.r(e);o(239);var r=o(90);for(var n in r)"default"!==n&&function(t){o.d(e,t,function(){return r[t]})}(n)},"239":function(t,e,o){"use strict";o(155)},"240":function(t,e,o){},"32":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var f=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,e){var o=[],r=!0,n=!1,a=void 0;try{for(var s,i=t[Symbol.iterator]();!(r=(s=i.next()).done)&&(o.push(s.value),!e||o.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(t,e,o){return e&&defineProperties(t.prototype,e),o&&defineProperties(t,o),t};function defineProperties(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var n,a,d=o(0),u=function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}(d),p=o(154);function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}o(240);var s=(function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{"constructor":{"value":t,"enumerable":!1,"writable":!0,"configurable":!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Lists,d.Component),r(Lists,[{"key":"_constructor","value":function _constructor(){(function get(t,e,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:get(n,e,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(Lists.prototype.__proto__||Object.getPrototypeOf(Lists.prototype),"_constructor",this).call(this),this.state={"choosed":"","orderId":"","lists":[],"type":"","stationName":""},this.$$refs=new u.default.RefsArray}},{"key":"componentWillMount","value":function componentWillMount(){var t=this,e=this.$router.params,o=e.orderId,r=e.type,n=e.stationName;this.setState({"orderId":o,"type":r,"stationName":n},function(){t.getLists(o)})}},{"key":"_createData","value":function _createData(t,e,o){this.__state=t||this.state||{},this.__props=e||this.props||{};var r=this.$prefix,n=(0,d.genCompid)(r+"$compid__70"),a=f(n,2),s=a[0],i=a[1],c=(0,d.genCompid)(r+"$compid__71"),u=f(c,2),p=u[0],l=u[1];return 0<this.__state.lists.length&&d.propsManager.set({"options":this.__state.lists,"value":this.__state.choosed,"onClick":this.handleChange},i,s),d.propsManager.set({"onClick":this.dispatchOrderNow,"className":"foot-btn","type":"primary"},l,p),Object.assign(this.__state,{"$compid__70":i,"$compid__71":l}),this.__state}}]),a=n=Lists,n.$$events=[],n.$$componentPath="pages/admin/staffs",a);function Lists(){var t,e,c;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Lists);for(var o=arguments.length,r=Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=c=_possibleConstructorReturn(this,(t=Lists.__proto__||Object.getPrototypeOf(Lists)).call.apply(t,[this].concat(r)))).$usedState=["$compid__70","$compid__71","choosed","orderId","lists","type","stationName"],c.config={"navigationBarTitleText":"报修订单","navigationStyle":"default"},c.getLists=function(t){(0,p.masterLists)(t).then(function(t){if(0===t.data.code){var e=t.data.data.map(function(t){return t.label=t.name,t.value=t.masterId,t.desc=t.processingNum+"个待处理工单",t});c.setState({"lists":e})}})},c.dispatchOrderNow=function(){var t=u.default.getStorageSync("masterInfo"),e=c.state,o=e.orderId,r=e.choosed,n=e.stationName,a=e.type;console.log("staffs------",o);var s={"serviceUserId":r,"departmentName":n,"userId":t.masterId,"username":t.masterName},i=p.dispatchOrder;"order"===a?(s.orderId=o,i=p.dispatchOrder):"appeal"===a&&(s.appealId=o,i=p.dispatchAppeal),i(s).then(function(t){0===t.data.code?u.default.showToast({"title":"分配成功"}).then(function(){setTimeout(function(){u.default.navigateBack({"delta":-1})},1500)}):u.default.showToast({"title":"分配失败"+t.data.msg,"icon":"none"})})},c.handleChange=function(t){c.setState({"choosed":t})},c.customComponents=["AtRadio","AtButton"],_possibleConstructorReturn(c,e)}e.default=s,Component(o(0).default.createComponent(s,!0))},"90":function(t,e,o){"use strict";o.r(e);var r=o(32),n=o.n(r);for(var a in r)"default"!==a&&function(t){o.d(e,t,function(){return r[t]})}(a);e.default=n.a}},[[238,0,1,2]]]);