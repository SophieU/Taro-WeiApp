(wx.webpackJsonp=wx.webpackJsonp||[]).push([[43],{"145":function(e,t,n){e.exports=n.p+"pages/mall/order-now.wxml"},"222":function(e,t,n){"use strict";n.r(t);n(223);var o=n(83);for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a)},"223":function(e,t,n){"use strict";n(145)},"224":function(e,t,n){},"27":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{"value":!0});var o=function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e};function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a,r,s=n(6),i=n(0),u=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(i),d=n(5),l=n(8);n(224);var c=n(11);function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(GoodsDetail,i.Component),o(GoodsDetail,[{"key":"_constructor","value":function _constructor(e){(function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0})(GoodsDetail.prototype.__proto__||Object.getPrototypeOf(GoodsDetail.prototype),"_constructor",this).call(this,e),this.state={"installDate":"","installTime":"","address":"","productId":"","detail":{},"addressObj":{"id":"","userMobile":"","userName":""},"today":"","nowTime":""},this.$$refs=new u.default.RefsArray}},{"key":"componentWillMount","value":function componentWillMount(){this.getDefault()}},{"key":"componentDidShow","value":function componentDidShow(){var e=this.$router.params.id;this.getDetail(e);var t=this.props.appStore.orderForm,n=new Date,o=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),a=n.getHours()+":"+n.getMinutes();this.setState({"address":t.address,"addressObj":t.addressObj,"productId":e,"today":o,"nowTime":a})}},{"key":"_createData","value":function _createData(e,t,n){var o=this;return this.__state=e||this.state||{},this.__props=t||this.props||{},this.$prefix,this.anonymousFunc0=function(e){return o.handleInputChange(e,"userName")},this.anonymousFunc1=function(e){return o.handleInputChange(e,"userMobile")},Object.assign(this.__state,{}),this.__state}},{"key":"anonymousFunc0","value":function anonymousFunc0(){}},{"key":"anonymousFunc1","value":function anonymousFunc1(){}}]),r=a=GoodsDetail,a.$$events=["anonymousFunc0","anonymousFunc1","onDateChange","onTimeChange","submitBook"],a.$$componentPath="pages/mall/order-now",r);function GoodsDetail(){var e,t,r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GoodsDetail);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=r=_possibleConstructorReturn(this,(e=GoodsDetail.__proto__||Object.getPrototypeOf(GoodsDetail)).call.apply(e,[this].concat(o)))).$usedState=["installDate","installTime","address","productId","detail","addressObj","today","nowTime","appStore"],r.config={"navigationBarTitleText":"预约提交","navigationStyle":"default"},r.handleInputChange=function(e,n){var o=e.detail.value;r.setState(function(e){var t=e.addressObj;return t[n]=o,{"addressObj":t}})},r.getDetail=function(e){(0,l.getSubscribeDetail)(e).then(function(e){0===e.data.code&&r.setState({"detail":e.data.data})})},r.onDateChange=function(e){var t=e.detail.value;r.setState({"installDate":t})},r.onTimeChange=function(e){var t=e.detail.value;r.setState({"installTime":t})},r.getDefault=function(){(0,c.getDefaultAdd)().then(function(e){if(0===e.data.code){var t=e.data.data;t?r.setState(function(){return{"address":t.areaInfo+t.address,"addressObj":{"id":t.id,"userName":t.userName,"userMobile":t.userMobile}}},function(){r.props.appStore.setOrderForm({"address":t.areaInfo+t.address,"addressObj":t}),r.getOrderContentWithAdd()}):r.getOrderContentNone()}else console.log("默认地址获取失败："+e.data.msg)})},r.submitBook=function(){var e=r.state,t=e.installDate,n=e.installTime,o=e.productId;if(t.length<=0||n.length<=0)u.default.showToast({"title":"请选择上门日期和时间","icon":"none"});else{var a={"repairAddressId":r.state.addressObj.id,"productId":o,"userPhone":r.state.addressObj.userMobile,"username":r.state.addressObj.userName,"hopeDoorTime":t+" "+n+":00"};u.default.showLoading({"title":"提交中"}),(0,l.submitOrder)(a).then(function(e){if(u.default.hideLoading(),0===e.data.code){e.data.data;u.default.showModal({"title":"温馨提示","content":"您的预约订单已提交，可在【我的】-【预约订单】中查看","confirmText":"查看订单","cancelText":"回到首页"}).then(function(e){e.confirm?u.default.redirectTo({"url":"/pages/mall/order-lists-custom"}):u.default.reLaunch({"url":"/pages/index/index"})})}else u.default.showToast({"title":e.data.msg,"icon":"none"})})}},r.customComponents=[],_possibleConstructorReturn(r,t)}f=(0,s.__decorate)([(0,d.inject)("appStore"),d.observer],f),t.default=f,Component(n(0).default.createComponent(f,!0))},"83":function(e,t,n){"use strict";n.r(t);var o=n(27),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);t.default=a.a}},[[222,0,1,2]]]);